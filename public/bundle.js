var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function a(t){t.forEach(n)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e,n){const r=e.subscribe(n);t.$$.on_destroy.push(r.unsubscribe?()=>r.unsubscribe():r)}let l="undefined"!=typeof window?()=>window.performance.now():()=>Date.now();const i=new Set;let u,f=!1;function m(){i.forEach(t=>{t[0](l())||(i.delete(t),t[1]())}),(f=i.size>0)&&requestAnimationFrame(m)}function d(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function $(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function y(){return g(" ")}function b(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function w(t,e){e=""+e,t.data!==e&&(t.data=e)}function x(t,e,n){t.classList[n?"add":"remove"](e)}function _(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}let S,A=0,N={};function k(t,e,n,r,a,s,o,c=0){const l=16.666/r;let i="{\n";for(let t=0;t<=1;t+=l){const r=e+(n-e)*s(t);i+=100*t+`%{${o(r,1-r)}}\n`}const f=i+`100% {${o(n,1-n)}}\n}`,m=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(f)}_${c}`;if(!N[m]){if(!u){const t=h("style");document.head.appendChild(t),u=t.sheet}N[m]=!0,u.insertRule(`@keyframes ${m} ${f}`,u.cssRules.length)}const d=t.style.animation||"";return t.style.animation=`${d?`${d}, `:""}${m} ${r}ms linear ${a}ms 1 both`,A+=1,m}function P(t,e){t.style.animation=(t.style.animation||"").split(", ").filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")).join(", "),e&&!--A&&requestAnimationFrame(()=>{if(A)return;let t=u.cssRules.length;for(;t--;)u.deleteRule(t);N={}})}function E(t){S=t}function O(){const t=S;return(e,n)=>{const r=t.$$.callbacks[e];if(r){const a=_(e,n);r.slice().forEach(e=>{e.call(t,a)})}}}const C=[],q=Promise.resolve();let j=!1;const X=[],B=[],G=[];function R(t){B.push(t)}function F(){const t=new Set;do{for(;C.length;){const t=C.shift();E(t),L(t.$$)}for(;X.length;)X.shift()();for(;B.length;){const e=B.pop();t.has(e)||(e(),t.add(e))}}while(C.length);for(;G.length;)G.pop()();j=!1}function L(t){t.fragment&&(t.update(t.dirty),a(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(R))}let z,D;function M(t,e,n){t.dispatchEvent(_(`${e?"intro":"outro"}${n}`))}function T(){D={remaining:0,callbacks:[]}}function H(){D.remaining||a(D.callbacks)}function I(t){D.callbacks.push(t)}function J(n,r,s,o){let c=r(n,s),u=o?0:1,d=null,p=null,v=null;function $(){v&&P(n,v)}function h(t,e){const n=t.b-u;return e*=Math.abs(n),{a:u,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function g(r){const{delay:s=0,duration:o=300,easing:g=e,tick:y=t,css:b}=c,w={start:l()+s,b:r};r||(w.group=D,D.remaining+=1),d?p=w:(b&&($(),v=k(n,u,r,o,s,g,b)),r&&y(0,1),d=h(w,o),R(()=>M(n,r,"start")),function(t){let e;f||(f=!0,requestAnimationFrame(m)),new Promise(n=>{i.add(e=[t,n])})}(t=>{if(p&&t>p.start&&(d=h(p,o),p=null,M(n,d.b,"start"),b&&($(),v=k(n,u,d.b,d.duration,0,g,c.css))),d)if(t>=d.end)y(u=d.b,1-u),M(n,d.b,"end"),p||(d.b?$():--d.group.remaining||a(d.group.callbacks)),d=null;else if(t>=d.start){const e=t-d.start;u=d.a+d.d*g(e/d.duration),y(u,1-u)}return!(!d&&!p)}))}return{run(t){"function"==typeof c?(z||(z=Promise.resolve()).then(()=>{z=null}),z).then(()=>{c=c(),g(t)}):g(t)},end(){$(),d=p=null}}}function K(t,e,r){const{fragment:o,on_mount:c,on_destroy:l,after_render:i}=t.$$;o.m(e,r),R(()=>{const e=c.map(n).filter(s);l?l.push(...e):a(e),t.$$.on_mount=[]}),i.forEach(R)}function Q(t,e){t.$$.dirty||(C.push(t),j||(j=!0,q.then(F)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function U(e,n,s,o,c,l){const i=S;E(e);const u=n.props||{},f=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:r(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(i?i.$$.context:[]),callbacks:r(),dirty:null};let m=!1;var d;f.ctx=s?s(e,u,(t,n)=>{f.ctx&&c(f.ctx[t],f.ctx[t]=n)&&(f.bound[t]&&f.bound[t](n),m&&Q(e,t))}):u,f.update(),m=!0,a(f.before_render),f.fragment=o(f.ctx),n.target&&(n.hydrate?f.fragment.l((d=n.target,Array.from(d.childNodes))):f.fragment.c(),n.intro&&e.$$.fragment.i&&e.$$.fragment.i(),K(e,n.target,n.anchor),F()),E(i)}class V{$destroy(){var e,n;n=!0,(e=this).$$&&(a(e.$$.on_destroy),e.$$.fragment.d(n),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function W(){}const Y=function(t,e=W){let n;const r=[];function a(e){if(s=e,(a=t)!=a?s==s:a!==s||a&&"object"==typeof a||"function"==typeof a){if(t=e,!n)return;r.forEach(t=>t[1]()),r.forEach(e=>e[0](t))}var a,s}return{set:a,update:function(e){a(e(t))},subscribe:function(s,o=W){const c=[s,o];return r.push(c),1===r.length&&(n=e(a)||W),s(t),()=>{const t=r.indexOf(c);-1!==t&&r.splice(t,1),0===r.length&&n()}}}}("X");function Z(t,{delay:e=0,duration:n=400}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,css:t=>`opacity: ${t*r}`}}function tt(e){var n,r,a;return{c(){(n=h("button")).disabled=r=!e.active,n.className="svelte-1xgiiod",x(n,"inactive",!e.active),x(n,"x","X"===e.player),x(n,"o","O"===e.player),a=b(n,"click",e.makeStep)},m(t,e){p(t,n,e)},p(t,e){t.active&&r!==(r=!e.active)&&(n.disabled=r),t.active&&x(n,"inactive",!e.active),t.player&&(x(n,"x","X"===e.player),x(n,"o","O"===e.player))},i:t,o:t,d(t){t&&v(n),a()}}}function et(t,e,n){let r;c(t,Y,t=>{n("$activePlayer",r=t)});let{row:a,col:s}=e,o=!0,l="";const i=O();return t.$set=(t=>{"row"in t&&n("row",a=t.row),"col"in t&&n("col",s=t.col)}),{row:a,col:s,active:o,player:l,makeStep:function(){o&&(n("active",o=!1),n("player",l=r),i("step",{row:a,col:s}))}}}class nt extends V{constructor(t){super(),U(this,t,et,tt,o,["row","col"])}}function rt(t,e,n){const r=Object.create(t);return r.null=e[n].null,r.col=n,r}function at(t,e,n){const r=Object.create(t);return r.null=e[n].null,r.row=n,r}function st(e){var n,r=new nt({props:{row:e.row,col:e.col}});return r.$on("step",e.step_handler),{c(){r.$$.fragment.c()},m(t,e){K(r,t,e),n=!0},p:t,i(t){n||(r.$$.fragment.i(t),n=!0)},o(t){r.$$.fragment.o(t),n=!1},d(t){r.$destroy(t)}}}function ot(t){for(var e,n,r,a=t.scaleArr,s=[],o=0;o<a.length;o+=1)s[o]=st(rt(t,a,o));function c(t,e,n){s[t]&&(e&&I(()=>{s[t].d(e),s[t]=null}),s[t].o(n))}return{c(){e=h("div");for(var t=0;t<s.length;t+=1)s[t].c();n=y(),e.className="row svelte-iff3l2"},m(t,a){p(t,e,a);for(var o=0;o<s.length;o+=1)s[o].m(e,null);d(e,n),r=!0},p(t,r){if(t.scaleArr){a=r.scaleArr;for(var o=0;o<a.length;o+=1){const c=rt(r,a,o);s[o]?(s[o].p(t,c),s[o].i(1)):(s[o]=st(c),s[o].c(),s[o].i(1),s[o].m(e,n))}for(T();o<s.length;o+=1)c(o,1,1);H()}},i(t){if(!r){for(var e=0;e<a.length;e+=1)s[e].i();r=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)c(t,0);r=!1},d(t){t&&v(e),$(s,t)}}}function ct(t){for(var e,n,r,a,s,o,c,l,i,u=t.scaleArr,f=[],m=0;m<u.length;m+=1)f[m]=ot(at(t,u,m));function b(t,e,n){f[t]&&(e&&I(()=>{f[t].d(e),f[t]=null}),f[t].o(n))}return{c(){e=h("main"),n=h("p"),r=g("Ход №"),a=g(t.moves),s=g(" игрок - "),o=g(t.$activePlayer),c=y();for(var l=0;l<f.length;l+=1)f[l].c();n.className="info svelte-iff3l2",e.className="board svelte-iff3l2"},m(t,l){p(t,e,l),d(e,n),d(n,r),d(n,a),d(n,s),d(n,o),d(e,c);for(var u=0;u<f.length;u+=1)f[u].m(e,null);i=!0},p(t,n){if(i&&!t.moves||w(a,n.moves),i&&!t.$activePlayer||w(o,n.$activePlayer),t.scaleArr){u=n.scaleArr;for(var r=0;r<u.length;r+=1){const a=at(n,u,r);f[r]?(f[r].p(t,a),f[r].i(1)):(f[r]=ot(a),f[r].c(),f[r].i(1),f[r].m(e,null))}for(T();r<f.length;r+=1)b(r,1,1);H()}},i(t){if(!i){for(var n=0;n<u.length;n+=1)f[n].i();R(()=>{l||(l=J(e,Z,{},!0)),l.run(1)}),i=!0}},o(t){f=f.filter(Boolean);for(let t=0;t<f.length;t+=1)b(t,0);l||(l=J(e,Z,{},!1)),l.run(0),i=!1},d(t){t&&v(e),$(f,t),t&&l&&l.end()}}}function lt(t,e,n){let r;c(t,Y,t=>{n("$activePlayer",r=t)});let{scale:a,moves:s}=e,o=[];return t.$set=(t=>{"scale"in t&&n("scale",a=t.scale),"moves"in t&&n("moves",s=t.moves)}),t.$$.update=((t={scale:1,scaleArr:1})=>{if(t.scale||t.scaleArr)for(let t=0;t<a;t++)o.push(t)}),{scale:a,moves:s,scaleArr:o,$activePlayer:r,step_handler:function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}(t,e)}}}class it extends V{constructor(t){super(),U(this,t,lt,ct,o,["scale","moves"])}}function ut(e){var n,r,s,o,c,l,i;return{c(){var t,a,u,f;n=h("form"),r=h("label"),(s=h("span")).textContent="Размер поля:",o=h("input"),c=y(),(l=h("button")).textContent="Начать игру",s.className="svelte-1q2safb",t=o,a="type",null==(u="number")?t.removeAttribute(a):t.setAttribute(a,u),o.required=!0,o.min="3",o.max="15",o.className="svelte-1q2safb",r.className="svelte-1q2safb",l.className="btn",l.type="submit",n.className="svelte-1q2safb",i=[b(o,"input",e.input_input_handler),b(n,"submit",(f=e.startGame,function(t){return t.preventDefault(),f.call(this,t)}))]},m(t,a){p(t,n,a),d(n,r),d(r,s),d(r,o),o.value=e.scale,d(n,c),d(n,l)},p(t,e){t.scale&&(o.value=e.scale)},i:t,o:t,d(t){t&&v(n),a(i)}}}function ft(t,e,n){let r=3;const a=O();return{scale:r,startGame:function(){a("start",r)},input_input_handler:function(){var t;t=this.value,n("scale",r=""===t?void 0:+t)}}}class mt extends V{constructor(t){super(),U(this,t,ft,ut,o,[])}}function dt(e){var n,r,a,s,o,c,l,i,u,f,m,$,b,x,_,S=e.wins.O,A=e.wins.X;return{c(){n=h("header"),(r=h("h1")).textContent="Крестики нолики",a=y(),s=h("div"),o=h("span"),c=g(S),l=g(" побед ноликов"),i=y(),u=h("span"),f=g("Матч № "),m=g(e.matches),$=y(),b=h("span"),x=g(A),_=g(" побед крестиков"),r.className="svelte-1c640gv",o.className="svelte-1c640gv",u.className="svelte-1c640gv",b.className="svelte-1c640gv",s.className="svelte-1c640gv",n.className="svelte-1c640gv"},m(t,e){p(t,n,e),d(n,r),d(n,a),d(n,s),d(s,o),d(o,c),d(o,l),d(s,i),d(s,u),d(u,f),d(u,m),d(s,$),d(s,b),d(b,x),d(b,_)},p(t,e){t.wins&&S!==(S=e.wins.O)&&w(c,S),t.matches&&w(m,e.matches),t.wins&&A!==(A=e.wins.X)&&w(x,A)},i:t,o:t,d(t){t&&v(n)}}}function pt(t,e,n){let{matches:r=0,wins:a={}}=e;return t.$set=(t=>{"matches"in t&&n("matches",r=t.matches),"wins"in t&&n("wins",a=t.wins)}),{matches:r,wins:a}}class vt extends V{constructor(t){super(),U(this,t,pt,dt,o,["matches","wins"])}}function $t(e){var n;return{c(){(n=h("p")).textContent="Ничья"},m(t,e){p(t,n,e)},p:t,d(t){t&&v(n)}}}function ht(t){var e,n,r,a;return{c(){e=h("p"),n=g("Игрок "),r=g(t.player),a=g(" победил")},m(t,s){p(t,e,s),d(e,n),d(e,r),d(e,a)},p(t,e){t.player&&w(r,e.player)},d(t){t&&v(e)}}}function gt(e){var n,r,a,s;function o(t){return"win"==t.gameStatus?ht:$t}var c=o(e),l=c(e);return{c(){n=h("div"),l.c(),r=y(),(a=h("button")).textContent="Начать новую игру",a.className="btn",n.className="results svelte-1tl4zfn",s=b(a,"click",e.restart)},m(t,e){p(t,n,e),l.m(n,null),d(n,r),d(n,a)},p(t,e){c===(c=o(e))&&l?l.p(t,e):(l.d(1),(l=c(e))&&(l.c(),l.m(n,r)))},i:t,o:t,d(t){t&&v(n),l.d(),s()}}}function yt(t,e,n){let{gameStatus:r,player:a}=e;const s=O();return t.$set=(t=>{"gameStatus"in t&&n("gameStatus",r=t.gameStatus),"player"in t&&n("player",a=t.player)}),{gameStatus:r,player:a,restart:function(){s("restart")}}}class bt extends V{constructor(t){super(),U(this,t,yt,gt,o,["gameStatus","player"])}}function wt(t){var e,n=new bt({props:{gameStatus:t.gameStatus,player:t.notActivePlayer}});return n.$on("restart",t.restart),{c(){n.$$.fragment.c()},m(t,r){K(n,t,r),e=!0},p(t,e){var r={};t.gameStatus&&(r.gameStatus=e.gameStatus),t.notActivePlayer&&(r.player=e.notActivePlayer),n.$set(r)},i(t){e||(n.$$.fragment.i(t),e=!0)},o(t){n.$$.fragment.o(t),e=!1},d(t){n.$destroy(t)}}}function xt(t){var e,n=new it({props:{scale:t.scale,moves:t.moves}});return n.$on("step",t.makeStep),{c(){n.$$.fragment.c()},m(t,r){K(n,t,r),e=!0},p(t,e){var r={};t.scale&&(r.scale=e.scale),t.moves&&(r.moves=e.moves),n.$set(r)},i(t){e||(n.$$.fragment.i(t),e=!0)},o(t){n.$$.fragment.o(t),e=!1},d(t){n.$destroy(t)}}}function _t(e){var n,r=new mt({});return r.$on("start",e.startGame),{c(){r.$$.fragment.c()},m(t,e){K(r,t,e),n=!0},p:t,i(t){n||(r.$$.fragment.i(t),n=!0)},o(t){r.$$.fragment.o(t),n=!1},d(t){r.$destroy(t)}}}function St(t){var e,n,r,a,s,o=new vt({props:{matches:t.matches,",":!0,wins:t.wins}}),c=[_t,xt,wt],l=[];function i(t){return"start"==t.gameStatus?0:"turn"==t.gameStatus?1:2}return r=i(t),a=l[r]=c[r](t),{c(){e=h("div"),o.$$.fragment.c(),n=y(),a.c(),e.id="app",e.className="svelte-1oyob1g"},m(t,a){p(t,e,a),K(o,e,null),d(e,n),l[r].m(e,null),s=!0},p(t,n){var s={};t.matches&&(s.matches=n.matches),t.wins&&(s.wins=n.wins),o.$set(s);var u=r;(r=i(n))===u?l[r].p(t,n):(T(),I(()=>{l[u].d(1),l[u]=null}),a.o(1),H(),(a=l[r])||(a=l[r]=c[r](n)).c(),a.i(1),a.m(e,null))},i(t){s||(o.$$.fragment.i(t),a&&a.i(),s=!0)},o(t){o.$$.fragment.o(t),a&&a.o(),s=!1},d(t){t&&v(e),o.$destroy(),l[r].d()}}}function At(t,e,n){let r;c(t,Y,t=>{n("$activePlayer",r=t)});let a,s=0,o={O:0,X:0},l=3,i="start",u={},f={},m=0;function d(){p(u)||p(f)||function(){const t=[],e=[];for(let n=0;n<l;n++)for(let r=0;r<l;r++)n===r?t.push(u[n][r]):n+r===l-1&&e.push(u[n][r]);return!(!t.every(t=>t===r)&&!e.every(t=>t===r))}()?(n("gameStatus",i="win"),n("matches",++s),o[r]++,n("wins",o)):m===l*l&&(n("gameStatus",i="draw"),n("matches",++s))}function p(t){const e=Object.keys(t);for(const n of e)if(Object.values(t[n]).every(t=>t===r))return!0;return!1}return t.$$.update=((t={scale:1,$activePlayer:1})=>{if(t.scale)for(let t=0;t<l;t++){u[t]={},n("board",u),n("scale",l),f[t]={},n("mirrorBoard",f),n("scale",l);for(let e=0;e<l;e++)u[t][e]="!",n("board",u),n("scale",l),f[t][e]="f",n("mirrorBoard",f),n("scale",l)}t.$activePlayer&&n("notActivePlayer",a="X"===r?"O":"X")}),{matches:s,wins:o,scale:l,gameStatus:i,moves:m,restart:function(){n("scale",l=0),n("moves",m=0),n("gameStatus",i="start")},makeStep:function(t){var e;n("moves",++m),e=t.detail,u[e.row][e.col]=r,n("board",u),n("scale",l),f[e.col][e.row]=r,n("mirrorBoard",f),n("scale",l),d(),Y.update(()=>a)},startGame:function(t){n("scale",l=t.detail),n("gameStatus",i="turn")},notActivePlayer:a}}return new class extends V{constructor(t){super(),U(this,t,At,St,o,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
