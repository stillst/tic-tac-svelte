var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function a(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e,t){e.appendChild(t)}function l(e,t,n){e.insertBefore(t,n||null)}function o(e){e.parentNode.removeChild(e)}function i(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function u(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function m(){return f(" ")}function v(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function p(e,t){t=""+t,e.data!==t&&(e.data=t)}function d(e,t,n){e.classList[n?"add":"remove"](t)}let $;function y(e){$=e}function h(){const e=$;return(t,n)=>{const r=e.$$.callbacks[t];if(r){const a=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach(t=>{t.call(e,a)})}}}const g=[],w=Promise.resolve();let P=!1;const b=[],x=[],N=[];function _(e){x.push(e)}function A(){const e=new Set;do{for(;g.length;){const e=g.shift();y(e),k(e.$$)}for(;b.length;)b.shift()();for(;x.length;){const t=x.pop();e.has(t)||(t(),e.add(t))}}while(g.length);for(;N.length;)N.pop()();P=!1}function k(e){e.fragment&&(e.update(e.dirty),r(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(_))}let O;function S(){O={remaining:0,callbacks:[]}}function E(){O.remaining||r(O.callbacks)}function X(e){O.callbacks.push(e)}function C(e,n,c){const{fragment:s,on_mount:l,on_destroy:o,after_render:i}=e.$$;s.m(n,c),_(()=>{const n=l.map(t).filter(a);o?o.push(...n):r(n),e.$$.on_mount=[]}),i.forEach(_)}function q(e,t){e.$$.dirty||(g.push(e),P||(P=!0,w.then(A)),e.$$.dirty=n()),e.$$.dirty[t]=!0}function j(t,a,c,s,l,o){const i=$;y(t);const u=a.props||{},f=t.$$={fragment:null,ctx:null,props:o,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(i?i.$$.context:[]),callbacks:n(),dirty:null};let m=!1;var v;f.ctx=c?c(t,u,(e,n)=>{f.ctx&&l(f.ctx[e],f.ctx[e]=n)&&(f.bound[e]&&f.bound[e](n),m&&q(t,e))}):u,f.update(),m=!0,r(f.before_render),f.fragment=s(f.ctx),a.target&&(a.hydrate?f.fragment.l((v=a.target,Array.from(v.childNodes))):f.fragment.c(),a.intro&&t.$$.fragment.i&&t.$$.fragment.i(),C(t,a.target,a.anchor),A()),y(i)}class B{$destroy(){var t,n;n=!0,(t=this).$$&&(r(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function G(t){var n,r;return{c(){(n=u("button")).className="svelte-1nrzyp0",d(n,"inactive",!t.active),d(n,"x","X"===t.player),d(n,"o","O"===t.player),r=v(n,"click",t.makeStep)},m(e,t){l(e,n,t)},p(e,t){e.active&&d(n,"inactive",!t.active),e.player&&(d(n,"x","X"===t.player),d(n,"o","O"===t.player))},i:e,o:e,d(e){e&&o(n),r()}}}function L(e,t,n){const r=h();let{row:a,col:c,activePlayer:s}=t,l=!0,o="";return e.$set=(e=>{"row"in e&&n("row",a=e.row),"col"in e&&n("col",c=e.col),"activePlayer"in e&&n("activePlayer",s=e.activePlayer)}),{row:a,col:c,activePlayer:s,active:l,player:o,makeStep:function(){l&&(r("step",{row:a,col:c}),n("active",l=!1),n("player",o=s))}}}class z extends B{constructor(e){super(),j(this,e,L,G,c,["row","col","activePlayer"])}}function D(e,t,n){const r=Object.create(e);return r.null=t[n].null,r.col=n,r}function M(e,t,n){const r=Object.create(e);return r.null=t[n].null,r.row=n,r}function T(e){var t,n=new z({props:{row:e.row,col:e.col,activePlayer:e.activePlayer}});return n.$on("step",e.step_handler),{c(){n.$$.fragment.c()},m(e,r){C(n,e,r),t=!0},p(e,t){var r={};e.activePlayer&&(r.activePlayer=t.activePlayer),n.$set(r)},i(e){t||(n.$$.fragment.i(e),t=!0)},o(e){n.$$.fragment.o(e),t=!1},d(e){n.$destroy(e)}}}function F(e){for(var t,n,r,a=e.scaleArr,c=[],f=0;f<a.length;f+=1)c[f]=T(D(e,a,f));function v(e,t,n){c[e]&&(t&&X(()=>{c[e].d(t),c[e]=null}),c[e].o(n))}return{c(){t=u("div");for(var e=0;e<c.length;e+=1)c[e].c();n=m(),t.className="row svelte-1i61xyd"},m(e,a){l(e,t,a);for(var o=0;o<c.length;o+=1)c[o].m(t,null);s(t,n),r=!0},p(e,r){if(e.activePlayer||e.scaleArr){a=r.scaleArr;for(var s=0;s<a.length;s+=1){const l=D(r,a,s);c[s]?(c[s].p(e,l),c[s].i(1)):(c[s]=T(l),c[s].c(),c[s].i(1),c[s].m(t,n))}for(S();s<c.length;s+=1)v(s,1,1);E()}},i(e){if(!r){for(var t=0;t<a.length;t+=1)c[t].i();r=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)v(e,0);r=!1},d(e){e&&o(t),i(c,e)}}}function H(e){for(var t,n,r,a=e.scaleArr,c=[],f=0;f<a.length;f+=1)c[f]=F(M(e,a,f));function m(e,t,n){c[e]&&(t&&X(()=>{c[e].d(t),c[e]=null}),c[e].o(n))}return{c(){t=u("main"),n=u("div");for(var e=0;e<c.length;e+=1)c[e].c();n.className="board svelte-1i61xyd"},m(e,a){l(e,t,a),s(t,n);for(var o=0;o<c.length;o+=1)c[o].m(n,null);r=!0},p(e,t){if(e.scaleArr||e.activePlayer){a=t.scaleArr;for(var r=0;r<a.length;r+=1){const s=M(t,a,r);c[r]?(c[r].p(e,s),c[r].i(1)):(c[r]=F(s),c[r].c(),c[r].i(1),c[r].m(n,null))}for(S();r<c.length;r+=1)m(r,1,1);E()}},i(e){if(!r){for(var t=0;t<a.length;t+=1)c[t].i();r=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)m(e,0);r=!1},d(e){e&&o(t),i(c,e)}}}function I(e,t,n){let{scale:r,activePlayer:a}=t,c=[];return e.$set=(e=>{"scale"in e&&n("scale",r=e.scale),"activePlayer"in e&&n("activePlayer",a=e.activePlayer)}),e.$$.update=((e={scale:1,scaleArr:1})=>{if(e.scale||e.scaleArr)for(let e=0;e<r;e++)c.push(e)}),{scale:r,activePlayer:a,scaleArr:c,step_handler:function(t){!function(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}(e,t)}}}class J extends B{constructor(e){super(),j(this,e,I,H,c,["scale","activePlayer"])}}function K(t){var n,a,c,i,f,p,d;return{c(){var e,r,s,l;n=u("form"),a=u("label"),(c=u("span")).textContent="Размер поля:",i=u("input"),f=m(),(p=u("button")).textContent="Начать игру",c.className="svelte-1pxgsve",e=i,r="type",null==(s="number")?e.removeAttribute(r):e.setAttribute(r,s),i.min="3",i.max="15",i.className="svelte-1pxgsve",a.className="svelte-1pxgsve",p.className="btn",p.type="submit",n.className="svelte-1pxgsve",d=[v(i,"input",t.input_input_handler),v(n,"submit",(l=t.startGame,function(e){return e.preventDefault(),l.call(this,e)}))]},m(e,r){l(e,n,r),s(n,a),s(a,c),s(a,i),i.value=t.scale,s(n,f),s(n,p)},p(e,t){e.scale&&(i.value=t.scale)},i:e,o:e,d(e){e&&o(n),r(d)}}}function Q(e,t,n){const r=h();let a=3;return{scale:a,startGame:function(){r("start",a)},input_input_handler:function(){var e;e=this.value,n("scale",a=""===e?void 0:+e)}}}class R extends B{constructor(e){super(),j(this,e,Q,K,c,[])}}function U(t){var n,r,a,c,i,v,d,$,y,h,g,w,P,b,x,N,_,A=t.wins.O,k=t.wins.X;return{c(){n=u("header"),(r=u("h1")).textContent="Крестики нолики",a=m(),c=u("div"),i=u("span"),v=f("0 победил "),d=f(A),$=f(" раз"),y=m(),h=u("span"),g=f("Матч № "),w=f(t.matches),P=m(),b=u("span"),x=f("X победил "),N=f(k),_=f(" раз"),r.className="svelte-5qlpr2",i.className="svelte-5qlpr2",h.className="svelte-5qlpr2",b.className="svelte-5qlpr2",c.className="info svelte-5qlpr2",n.className="svelte-5qlpr2"},m(e,t){l(e,n,t),s(n,r),s(n,a),s(n,c),s(c,i),s(i,v),s(i,d),s(i,$),s(c,y),s(c,h),s(h,g),s(h,w),s(c,P),s(c,b),s(b,x),s(b,N),s(b,_)},p(e,t){e.wins&&A!==(A=t.wins.O)&&p(d,A),e.matches&&p(w,t.matches),e.wins&&k!==(k=t.wins.X)&&p(N,k)},i:e,o:e,d(e){e&&o(n)}}}function V(e,t,n){let{matches:r=0,wins:a={}}=t;return e.$set=(e=>{"matches"in e&&n("matches",r=e.matches),"wins"in e&&n("wins",a=e.wins)}),{matches:r,wins:a}}class W extends B{constructor(e){super(),j(this,e,V,U,c,["matches","wins"])}}function Y(t){var n,r,a,c,i,d,$,y;return{c(){n=u("div"),r=u("p"),a=f("Игрок "),c=f(t.notActivePlayer),i=f(" победил"),d=m(),($=u("button")).textContent="Начать новую игру",$.className="btn",n.className="results svelte-185yusv",y=v($,"click",t.restart)},m(e,t){l(e,n,t),s(n,r),s(r,a),s(r,c),s(r,i),s(n,d),s(n,$)},p(e,t){e.notActivePlayer&&p(c,t.notActivePlayer)},i:e,o:e,d(e){e&&o(n),y()}}}function Z(e){var t,n,r,a,c,i,v=new J({props:{scale:e.scale,",":!0,activePlayer:e.activePlayer}});return v.$on("step",e.makeStep),{c(){t=u("div"),n=u("p"),r=f("Ход игрока "),a=f(e.activePlayer),c=m(),v.$$.fragment.c(),t.className="info svelte-185yusv"},m(e,o){l(e,t,o),s(t,n),s(n,r),s(n,a),l(e,c,o),C(v,e,o),i=!0},p(e,t){i&&!e.activePlayer||p(a,t.activePlayer);var n={};e.scale&&(n.scale=t.scale),e.activePlayer&&(n.activePlayer=t.activePlayer),v.$set(n)},i(e){i||(v.$$.fragment.i(e),i=!0)},o(e){v.$$.fragment.o(e),i=!1},d(e){e&&(o(t),o(c)),v.$destroy(e)}}}function ee(t){var n,r=new R({});return r.$on("start",t.startGame),{c(){r.$$.fragment.c()},m(e,t){C(r,e,t),n=!0},p:e,i(e){n||(r.$$.fragment.i(e),n=!0)},o(e){r.$$.fragment.o(e),n=!1},d(e){r.$destroy(e)}}}function te(e){var t,n,r,a,c,i=new W({props:{matches:e.matches,",":!0,wins:e.wins}}),f=[ee,Z,Y],v=[];function p(e){return"start"==e.gameStatus?0:"turn"==e.gameStatus?1:2}return r=p(e),a=v[r]=f[r](e),{c(){t=u("div"),i.$$.fragment.c(),n=m(),a.c(),t.id="app",t.className="svelte-185yusv"},m(e,a){l(e,t,a),C(i,t,null),s(t,n),v[r].m(t,null),c=!0},p(e,n){var c={};e.matches&&(c.matches=n.matches),e.wins&&(c.wins=n.wins),i.$set(c);var s=r;(r=p(n))===s?v[r].p(e,n):(S(),X(()=>{v[s].d(1),v[s]=null}),a.o(1),E(),(a=v[r])||(a=v[r]=f[r](n)).c(),a.i(1),a.m(t,null))},i(e){c||(i.$$.fragment.i(e),a&&a.i(),c=!0)},o(e){i.$$.fragment.o(e),a&&a.o(),c=!1},d(e){e&&o(t),i.$destroy(),v[r].d()}}}function ne(e,t,n){let r,a=0,c={O:0,X:0},s=3,l="start",o={},i={},u="X",f=0;function m(e){const t=Object.keys(e);for(const n of t)if(Object.values(e[n]).every(e=>e===u))return!0;return!1}return e.$$.update=((e={scale:1,activePlayer:1})=>{if(e.scale)for(let e=0;e<s;e++){o[e]={},n("board",o),n("scale",s),i[e]={},n("mirrorBoard",i),n("scale",s);for(let t=0;t<s;t++)o[e][t]="!",n("board",o),n("scale",s),i[e][t]="f",n("mirrorBoard",i),n("scale",s)}e.activePlayer&&n("notActivePlayer",r="X"===u?"O":"X")}),{matches:a,wins:c,scale:s,gameStatus:l,activePlayer:u,startGame:function(e){n("scale",s=e.detail),n("gameStatus",l="turn")},restart:function(){n("scale",s=0),n("moves",f=0),n("gameStatus",l="start")},makeStep:function(e){var t;n("moves",++f),t=e.detail,o[t.row][t.col]=u,n("board",o),n("scale",s),i[t.col][t.row]=u,n("mirrorBoard",i),n("scale",s),f===s*s?(n("gameStatus",l="draw"),n("matches",++a)):(m(o)||m(i)||function(){const e=[],t=[];for(let n=0;n<s;n++)for(let r=0;r<s;r++)n===r?e.push(o[n][r]):n+r===s-1&&t.push(i[n][r]);return!(!e.every(e=>e===u)&&!t.every(e=>e===u))}())&&(n("gameStatus",l="win"),n("matches",++a),c[u]++,n("wins",c)),n("activePlayer",u=r)},notActivePlayer:r}}return new class extends B{constructor(e){super(),j(this,e,ne,te,c,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
